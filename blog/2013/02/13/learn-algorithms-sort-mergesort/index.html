
<!DOCTYPE HTML>
<html>
<head>
	<meta charset="utf-8">
	<title>Learn Algorithms : Sort --- Merge Sort - K.I.S.S</title>
	<meta name="author" content="metooit">

	
	<meta name="description" content="下面的这个排序算法呢， 是《算法导论》中首先涉及到一种思想而引出来的算法， 所以这里要总结的不止是归并排序这种算法而已， 还要说一下这里的一种思想方法分治法。 分治法： 算法的递归性： 递归性是指为了解决一个给定的问题， 算法一次或多次地调用自身， 以解决紧密相关的若干子问题。 算法的思想： &hellip;">
	

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

	<link href="/atom.xml" rel="alternate" title="K.I.S.S" type="application/atom+xml">
	
	<link rel="canonical" href="http://metooit.github.com/blog/2013/02/13/learn-algorithms-sort-mergesort/">
	<link href="/favicon.png" rel="shortcut icon">
	<link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
	<!--[if lt IE 9]><script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script><![endif]-->
	<script src="//ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
	<link href='http://fonts.googleapis.com/css?family=Open+Sans:400italic,400,700' rel='stylesheet' type='text/css'>
	
	

</head>

<body>
	<div class="container">
		<div class="left-col">
			<div class="intrude-less">
			<header id="header" class="inner"><div class="profilepic">	
	<script src="/javascripts/md5.js"></script>
        <img alt="Profile Picture" src="/images/bg.jpg" style="width:160px;"/>
	<script type="text/javascript">
	</script>
</div>

<!--
   - document.write("<img src='http://www.gravatar.com/avatar/" + MD5("") + "?s=160' alt='Profile Picture' style='width: 160px;'");
   -->

<h1><a href="/">K.I.S.S</a></h1>
</br>
<nav id="main-nav"><ul class="main">
    <li><a href="/">Blog</a></li>
    <li><a href="/blog/archives">Archives</a></li>
    <li><a href="http://about.me/jing_lee">About</a></li>
</ul>
</nav>
<p class="subtitle">Keep it simple, Stupid!</p>
<nav id="sub-nav">
	<div class="social">
		
		
		<a class="google" href="https://plus.google.com/oliver.lee.me@gmail.com?rel=author" title="Google+">Google+</a>
		
		
		<a class="twitter" href="http://twitter.com/metooit" title="Twitter">Twitter</a>
		
		
		<a class="github" href="https://github.com/metooit" title="GitHub">GitHub</a>
		
		
		
		
		
		
		<a class="rss" href="/atom.xml" title="RSS">RSS</a>
		
	</div>
</nav>
</br>

<!--<embed type='application/x-shockwave-flash' src='/javascripts/tagcloud.swf'width='100%' height='250' bgcolor='#ffffff' id='tagcloudflash' name='tagcloudflash' quality='high' allowscriptaccess='always'flashvars="tcolor=0x00aa00&amp;tcolor2=0x00dd00&amp;hicolor=0xff3333&amp;tspeed=100&amp;distr=true&amp;mode=tags&amp;tagcloud=%3Ctags%3E%3Ca+href%3D%27http%3A%2F%2Fmetooit.github.com%2Fblog%2Fcategories%2Falgorithms-%27+style%3D%27font-size%3A+50.0%25%27%3EAlgorithms%2C%3C%2Fa%3E+%3Ca+href%3D%27http%3A%2F%2Fmetooit.github.com%2Fblog%2Fcategories%2Fcode%27+style%3D%27font-size%3A+20.0%25%27%3Ecode%3C%2Fa%3E+%3Ca+href%3D%27http%3A%2F%2Fmetooit.github.com%2Fblog%2Fcategories%2Fdiary%27+style%3D%27font-size%3A+30.0%25%27%3Ediary%3C%2Fa%3E+%3Ca+href%3D%27http%3A%2F%2Fmetooit.github.com%2Fblog%2Fcategories%2Fgit%27+style%3D%27font-size%3A+30.0%25%27%3Egit%3C%2Fa%3E+%3Ca+href%3D%27http%3A%2F%2Fmetooit.github.com%2Fblog%2Fcategories%2Fgithub%27+style%3D%27font-size%3A+40.0%25%27%3Egithub%3C%2Fa%3E+%3Ca+href%3D%27http%3A%2F%2Fmetooit.github.com%2Fblog%2Fcategories%2Flearn%27+style%3D%27font-size%3A+40.0%25%27%3ELearn%3C%2Fa%3E+%3Ca+href%3D%27http%3A%2F%2Fmetooit.github.com%2Fblog%2Fcategories%2Flearn%27+style%3D%27font-size%3A+50.0%25%27%3Elearn%3C%2Fa%3E+%3Ca+href%3D%27http%3A%2F%2Fmetooit.github.com%2Fblog%2Fcategories%2Flearn-%27+style%3D%27font-size%3A+20.0%25%27%3ELearn%2C%3C%2Fa%3E+%3Ca+href%3D%27http%3A%2F%2Fmetooit.github.com%2Fblog%2Fcategories%2Flife%27+style%3D%27font-size%3A+20.0%25%27%3ELife%3C%2Fa%3E+%3Ca+href%3D%27http%3A%2F%2Fmetooit.github.com%2Fblog%2Fcategories%2Flinux%27+style%3D%27font-size%3A+20.0%25%27%3ELinux%3C%2Fa%3E+%3Ca+href%3D%27http%3A%2F%2Fmetooit.github.com%2Fblog%2Fcategories%2Fmarkdown%27+style%3D%27font-size%3A+20.0%25%27%3EMarkdown%3C%2Fa%3E+%3Ca+href%3D%27http%3A%2F%2Fmetooit.github.com%2Fblog%2Fcategories%2Fmemo%27+style%3D%27font-size%3A+20.0%25%27%3Ememo%3C%2Fa%3E+%3Ca+href%3D%27http%3A%2F%2Fmetooit.github.com%2Fblog%2Fcategories%2Fnote%27+style%3D%27font-size%3A+30.0%25%27%3ENote%3C%2Fa%3E+%3Ca+href%3D%27http%3A%2F%2Fmetooit.github.com%2Fblog%2Fcategories%2Fprogramming%27+style%3D%27font-size%3A+30.0%25%27%3EProgramming%3C%2Fa%3E+%3Ca+href%3D%27http%3A%2F%2Fmetooit.github.com%2Fblog%2Fcategories%2Fprogramming%27+style%3D%27font-size%3A+20.0%25%27%3Eprogramming%3C%2Fa%3E+%3Ca+href%3D%27http%3A%2F%2Fmetooit.github.com%2Fblog%2Fcategories%2Fprogramming-%27+style%3D%27font-size%3A+30.0%25%27%3EProgramming%2C%3C%2Fa%3E+%3Ca+href%3D%27http%3A%2F%2Fmetooit.github.com%2Fblog%2Fcategories%2Fpython-%27+style%3D%27font-size%3A+20.0%25%27%3EPython%2C%3C%2Fa%3E+%3Ca+href%3D%27http%3A%2F%2Fmetooit.github.com%2Fblog%2Fcategories%2Frails-%27+style%3D%27font-size%3A+20.0%25%27%3ERails%2C%3C%2Fa%3E+%3Ca+href%3D%27http%3A%2F%2Fmetooit.github.com%2Fblog%2Fcategories%2Fruby-%27+style%3D%27font-size%3A+50.0%25%27%3ERuby%2C%3C%2Fa%3E+%3Ca+href%3D%27http%3A%2F%2Fmetooit.github.com%2Fblog%2Fcategories%2Fscreen-%27+style%3D%27font-size%3A+20.0%25%27%3EScreen%2C%3C%2Fa%3E+%3Ca+href%3D%27http%3A%2F%2Fmetooit.github.com%2Fblog%2Fcategories%2Fsort-%27+style%3D%27font-size%3A+40.0%25%27%3ESort%2C%3C%2Fa%3E+%3Ca+href%3D%27http%3A%2F%2Fmetooit.github.com%2Fblog%2Fcategories%2Fsummary%27+style%3D%27font-size%3A+20.0%25%27%3Esummary%3C%2Fa%3E+%3Ca+href%3D%27http%3A%2F%2Fmetooit.github.com%2Fblog%2Fcategories%2Fvim%27+style%3D%27font-size%3A+20.0%25%27%3Evim%3C%2Fa%3E+%3C%2Ftags%3E">-->
<!--
<section>
  <h1>Tag Cloud</h1>
    <span id="tag-cloud"><embed type='application/x-shockwave-flash' src='/javascripts/tagcloud.swf'width='100%' height='250' bgcolor='#f2f2f2' id='tagcloudflash' name='tagcloudflash' quality='high' allowscriptaccess='always'flashvars="tcolor=0x333333&amp;tcolor2=0x333333&amp;hicolor=0x000000&amp;tspeed=100&amp;distr=true&amp;mode=tags&amp;tagcloud=%3Ctags%3E%3Ca+href%3D%27http%3A%2F%2Fmetooit.github.com%2Fblog%2Fcategories%2Falgorithms-%27+style%3D%27font-size%3A+50.0%25%27%3EAlgorithms%2C%3C%2Fa%3E+%3Ca+href%3D%27http%3A%2F%2Fmetooit.github.com%2Fblog%2Fcategories%2Fcode%27+style%3D%27font-size%3A+20.0%25%27%3Ecode%3C%2Fa%3E+%3Ca+href%3D%27http%3A%2F%2Fmetooit.github.com%2Fblog%2Fcategories%2Fdiary%27+style%3D%27font-size%3A+30.0%25%27%3Ediary%3C%2Fa%3E+%3Ca+href%3D%27http%3A%2F%2Fmetooit.github.com%2Fblog%2Fcategories%2Fgit%27+style%3D%27font-size%3A+30.0%25%27%3Egit%3C%2Fa%3E+%3Ca+href%3D%27http%3A%2F%2Fmetooit.github.com%2Fblog%2Fcategories%2Fgithub%27+style%3D%27font-size%3A+40.0%25%27%3Egithub%3C%2Fa%3E+%3Ca+href%3D%27http%3A%2F%2Fmetooit.github.com%2Fblog%2Fcategories%2Flearn%27+style%3D%27font-size%3A+40.0%25%27%3ELearn%3C%2Fa%3E+%3Ca+href%3D%27http%3A%2F%2Fmetooit.github.com%2Fblog%2Fcategories%2Flearn%27+style%3D%27font-size%3A+50.0%25%27%3Elearn%3C%2Fa%3E+%3Ca+href%3D%27http%3A%2F%2Fmetooit.github.com%2Fblog%2Fcategories%2Flearn-%27+style%3D%27font-size%3A+20.0%25%27%3ELearn%2C%3C%2Fa%3E+%3Ca+href%3D%27http%3A%2F%2Fmetooit.github.com%2Fblog%2Fcategories%2Flife%27+style%3D%27font-size%3A+20.0%25%27%3ELife%3C%2Fa%3E+%3Ca+href%3D%27http%3A%2F%2Fmetooit.github.com%2Fblog%2Fcategories%2Flinux%27+style%3D%27font-size%3A+20.0%25%27%3ELinux%3C%2Fa%3E+%3Ca+href%3D%27http%3A%2F%2Fmetooit.github.com%2Fblog%2Fcategories%2Fmarkdown%27+style%3D%27font-size%3A+20.0%25%27%3EMarkdown%3C%2Fa%3E+%3Ca+href%3D%27http%3A%2F%2Fmetooit.github.com%2Fblog%2Fcategories%2Fmemo%27+style%3D%27font-size%3A+20.0%25%27%3Ememo%3C%2Fa%3E+%3Ca+href%3D%27http%3A%2F%2Fmetooit.github.com%2Fblog%2Fcategories%2Fnote%27+style%3D%27font-size%3A+30.0%25%27%3ENote%3C%2Fa%3E+%3Ca+href%3D%27http%3A%2F%2Fmetooit.github.com%2Fblog%2Fcategories%2Fprogramming%27+style%3D%27font-size%3A+30.0%25%27%3EProgramming%3C%2Fa%3E+%3Ca+href%3D%27http%3A%2F%2Fmetooit.github.com%2Fblog%2Fcategories%2Fprogramming%27+style%3D%27font-size%3A+20.0%25%27%3Eprogramming%3C%2Fa%3E+%3Ca+href%3D%27http%3A%2F%2Fmetooit.github.com%2Fblog%2Fcategories%2Fprogramming-%27+style%3D%27font-size%3A+30.0%25%27%3EProgramming%2C%3C%2Fa%3E+%3Ca+href%3D%27http%3A%2F%2Fmetooit.github.com%2Fblog%2Fcategories%2Fpython-%27+style%3D%27font-size%3A+20.0%25%27%3EPython%2C%3C%2Fa%3E+%3Ca+href%3D%27http%3A%2F%2Fmetooit.github.com%2Fblog%2Fcategories%2Frails-%27+style%3D%27font-size%3A+20.0%25%27%3ERails%2C%3C%2Fa%3E+%3Ca+href%3D%27http%3A%2F%2Fmetooit.github.com%2Fblog%2Fcategories%2Fruby-%27+style%3D%27font-size%3A+50.0%25%27%3ERuby%2C%3C%2Fa%3E+%3Ca+href%3D%27http%3A%2F%2Fmetooit.github.com%2Fblog%2Fcategories%2Fscreen-%27+style%3D%27font-size%3A+20.0%25%27%3EScreen%2C%3C%2Fa%3E+%3Ca+href%3D%27http%3A%2F%2Fmetooit.github.com%2Fblog%2Fcategories%2Fsort-%27+style%3D%27font-size%3A+40.0%25%27%3ESort%2C%3C%2Fa%3E+%3Ca+href%3D%27http%3A%2F%2Fmetooit.github.com%2Fblog%2Fcategories%2Fsummary%27+style%3D%27font-size%3A+20.0%25%27%3Esummary%3C%2Fa%3E+%3Ca+href%3D%27http%3A%2F%2Fmetooit.github.com%2Fblog%2Fcategories%2Fvim%27+style%3D%27font-size%3A+20.0%25%27%3Evim%3C%2Fa%3E+%3C%2Ftags%3E"></span>
</section>

-->
</header>				
			</div>
		</div>	
		<div class="mid-col">
			
				
<div id="banner" class="inner">
	<div class="container">
		<ul class="feed"></ul>
	</div>
	<small><a href="http://twitter.com/metooit">metooit</a> @ <a href="http://twitter.com">Twitter</a></small>
	<div class="loading">Loading...</div>
</div>
<script src="/javascripts/twitter.js"></script>
<script type="text/javascript">
	(function($){
		$('#banner').getTwitterFeed('metooit', 4, true);
	})(jQuery);
</script>

			
			<div class="mid-col-container">
				<div id="content" class="inner"><article class="post">
	<h1 class="title">Learn Algorithms : Sort --- Merge Sort</h1>
	<div class="entry-content"><p>下面的这个排序算法呢， 是《算法导论》中首先涉及到一种思想而引出来的算法， 所以这里要总结的不止是<em>归并排序</em>这种算法而已， 还要说一下这里的一种思想方法<code>分治法</code>。</p>

<hr />

<h3>分治法：</h3>

<h4>算法的递归性：</h4>

<p>递归性是指为了解决一个给定的问题， 算法一次或多次地调用自身， 以解决紧密相关的若干子问题。</p>

<h4>算法的思想：</h4>

<p>运用递归来解决问题的算法通常典型地遵守<code>分治法</code>的思想： 将原问题分解为几个规模较小的子问题， 然后递归地求解这些子问题， 最后合并这些子问题的解来建立原问题的解。</p>

<h5>分治模式在每一层的递归时都有三个步骤：</h5>

<ul>
<li><h2>分解:</h2>

<p>原问题为若干子问题</p></li>
<li><h2>解决:</h2>

<p>这些子问题， 递归地求解各个子问题。</p></li>
<li><h2>合并:</h2>

<p>这些子问题的解为原问题的解。</p></li>
</ul>


<hr />

<h3>归并排序基本性能分析：</h3>

<table>
<thead>
<tr>
<th></th>
<th> 最坏情况时间复杂度    </th>
<th align="left"> 期望时间复杂度   </th>
<th align="left"> 空间复杂度</th>
</tr>
</thead>
<tbody>
<tr>
<td></td>
<td> O(n lgn)              </td>
<td align="left"> O(n lgn)         </td>
<td align="left"> O(n)</td>
</tr>
</tbody>
</table>


<ul>
<li>插入排序的特点：

<blockquote><ol>
<li>对于少量的元素， 它是一个非常有效的算法。</li>
<li>该算法原址排序输入的数： 算法在数组A中重排这些数， 在任何时候， 最多只有常数个数字存储在数组外面。</li>
</ol>
</blockquote></li>
</ul>


<!-- more -->


<h3>归并排序的实现过程：</h3>

<ul>
<li>分解： 将待排序的n个元素的序列分解问n/2的两个子序列。</li>
<li>解决： 使用归并排序递归地排序两个子序列。</li>
<li>合并： 合并两个已排序的子序列以产生结果。</li>
</ul>


<h3>归并排序的前提条件：</h3>

<p>排序数组 A[p..r]。该数组分解后产生<code>A[p..q]</code>和<code>A[q+1, r]</code>两个部分，其中p &lt; q &lt; r</p>

<h3>归并排序的特点：</h3>

<ul>
<li>归并排序的<em>关键</em>是“合并”步骤中将两个已经排序的序列合并的操作。也就是<code>MERGE</code>的过程。该过程需要<code>O(n)</code>的时间。其中 <code>n = r - p + 1</code>.</li>
<li>为了避免在每一个基本步骤中都检查堆是否为空， 我们在每个堆的底部放上一个哨兵， 它含有一个特殊值， 用于简化代码。</li>
</ul>


<h3>归并排序的伪代码实现：</h3>

<p><code>MERGE</code>过程的实现：</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>MERGE(A, p, q, r)
</span><span class='line'>1   n1 = q - p + 1
</span><span class='line'>2   n2 = r - q
</span><span class='line'>3   let L[1..n1 + 1] and R[1..n2 + 1] be new arrays
</span><span class='line'>4   for i = 1 to n1
</span><span class='line'>5       L[i] = A[p + i - 1]
</span><span class='line'>6   for j = 1 to n2
</span><span class='line'>7       R[j] = A[q + j]
</span><span class='line'>8   L[n1 + 1] = nil
</span><span class='line'>9   R[n2 + 1] = nil
</span><span class='line'>10  i = 1
</span><span class='line'>11  j = 1
</span><span class='line'>12  for k = p to r
</span><span class='line'>13      if L[i] &lt; R[j]
</span><span class='line'>14          A[k] = L[i]
</span><span class='line'>15          i = i + 1
</span><span class='line'>16      else A[k] = R[j]
</span><span class='line'>17          j = j + 1</span></code></pre></td></tr></table></div></figure>


<p>归并排序的主程序：</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>MERGE_SORT(A, p, r)
</span><span class='line'>1   if p &lt; r
</span><span class='line'>2       q = [(p + r) / 2]
</span><span class='line'>3       MERGE_SORT(A, p, q)
</span><span class='line'>4       MERGE_SORT(A, q+1, r)
</span><span class='line'>5       MERGE(A, p, q, r)</span></code></pre></td></tr></table></div></figure>


<h3>归并排序的C语言实现：</h3>

<p>首先， 实现算法的核心部分：也就是合并数组的过程， 这个过程实现如下：</p>

<figure class='code'><figcaption><span>insertion_sort    insertion_sort </span></figcaption>
 <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
</pre></td><td class='code'><pre><code class='c'><span class='line'><span class="cm">/*</span>
</span><span class='line'><span class="cm"> * method: merge_arrays</span>
</span><span class='line'><span class="cm"> * dercription : 将传入的两个子数组 sub_array_a 和 sub_array_b 合并， 并将结果存入到结果数组 result_array 中。</span>
</span><span class='line'><span class="cm"> * 其中的传入的另外两个参数分别表示两部分数组的大小。</span>
</span><span class='line'><span class="cm"> */</span>
</span><span class='line'><span class="k">static</span> <span class="kt">void</span> <span class="nf">merge_arrays</span><span class="p">(</span><span class="kt">int</span> <span class="n">sub_array_a</span><span class="p">[],</span> <span class="kt">int</span> <span class="n">sub_array_b</span><span class="p">[],</span> <span class="kt">int</span> <span class="n">result_array</span><span class="p">[],</span> <span class="kt">int</span> <span class="n">array_a_size</span><span class="p">,</span> <span class="kt">int</span> <span class="n">array_b_size</span><span class="p">)</span>
</span><span class='line'><span class="p">{</span>
</span><span class='line'>    <span class="kt">int</span> <span class="n">i</span><span class="p">,</span> <span class="n">j</span><span class="p">,</span> <span class="n">k</span><span class="p">;</span>
</span><span class='line'>    <span class="n">i</span> <span class="o">=</span> <span class="n">j</span> <span class="o">=</span> <span class="n">k</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
</span><span class='line'>
</span><span class='line'>    <span class="k">while</span><span class="p">(</span><span class="n">i</span> <span class="o">&lt;</span> <span class="n">array_a_size</span> <span class="o">&amp;&amp;</span> <span class="n">j</span> <span class="o">&lt;</span> <span class="n">array_b_size</span><span class="p">)</span>
</span><span class='line'>    <span class="p">{</span>
</span><span class='line'>        <span class="k">if</span><span class="p">(</span><span class="n">sub_array_a</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">&lt;=</span> <span class="n">sub_array_b</span><span class="p">[</span><span class="n">j</span><span class="p">])</span>
</span><span class='line'>            <span class="n">result_array</span><span class="p">[</span><span class="n">k</span><span class="o">++</span><span class="p">]</span> <span class="o">=</span> <span class="n">sub_array_a</span><span class="p">[</span><span class="n">i</span><span class="o">++</span><span class="p">];</span>
</span><span class='line'>        <span class="k">else</span>
</span><span class='line'>            <span class="n">result_array</span><span class="p">[</span><span class="n">k</span><span class="o">++</span><span class="p">]</span> <span class="o">=</span> <span class="n">sub_array_b</span><span class="p">[</span><span class="n">j</span><span class="o">++</span><span class="p">];</span>
</span><span class='line'>    <span class="p">}</span>
</span><span class='line'>
</span><span class='line'>    <span class="c1">// 两个子数组中谁先被拷贝完就把另外没有拷贝完的数组放到结果数组 result_array 的最后面。</span>
</span><span class='line'>    <span class="k">if</span> <span class="p">(</span><span class="n">i</span> <span class="o">==</span> <span class="n">array_a_size</span><span class="p">)</span>
</span><span class='line'>        <span class="n">copy_subsequence</span><span class="p">(</span><span class="n">sub_array_b</span><span class="p">,</span> <span class="n">result_array</span><span class="p">,</span> <span class="n">j</span><span class="p">,</span> <span class="n">array_b_size</span><span class="p">,</span> <span class="n">k</span><span class="p">,</span> <span class="n">array_a_size</span> <span class="o">+</span> <span class="n">array_b_size</span><span class="p">);</span>
</span><span class='line'>    <span class="k">else</span>
</span><span class='line'>        <span class="n">copy_subsequence</span><span class="p">(</span><span class="n">sub_array_a</span><span class="p">,</span> <span class="n">result_array</span><span class="p">,</span> <span class="n">i</span><span class="p">,</span> <span class="n">array_a_size</span><span class="p">,</span> <span class="n">k</span><span class="p">,</span> <span class="n">array_a_size</span> <span class="o">+</span> <span class="n">array_b_size</span><span class="p">);</span>
</span><span class='line'><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>


<p>主过程的实现：</p>

<figure class='code'><figcaption><span>MERGE_SORT    MERGE_SORT </span></figcaption>
 <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
</pre></td><td class='code'><pre><code class='c'><span class='line'><span class="kt">void</span> <span class="nf">merge_sort</span><span class="p">(</span><span class="kt">int</span> <span class="n">result_array</span><span class="p">[],</span> <span class="kt">int</span> <span class="n">n</span><span class="p">)</span>
</span><span class='line'><span class="p">{</span>
</span><span class='line'>    <span class="kt">int</span> <span class="n">half</span><span class="p">;</span>
</span><span class='line'>    <span class="kt">int</span> <span class="o">*</span><span class="n">sub_array_a</span><span class="p">,</span> <span class="o">*</span><span class="n">sub_array_b</span><span class="p">;</span>
</span><span class='line'>
</span><span class='line'>    <span class="k">if</span> <span class="p">(</span><span class="n">n</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>        <span class="n">half</span> <span class="o">=</span> <span class="n">n</span> <span class="o">/</span> <span class="mi">2</span><span class="p">;</span>
</span><span class='line'>
</span><span class='line'>        <span class="n">sub_array_a</span> <span class="o">=</span> <span class="p">(</span><span class="kt">int</span> <span class="o">*</span><span class="p">)</span><span class="n">malloc</span><span class="p">(</span><span class="k">sizeof</span><span class="p">(</span><span class="kt">int</span><span class="p">)</span><span class="o">*</span><span class="n">half</span><span class="p">);</span>
</span><span class='line'>        <span class="n">sub_array_b</span> <span class="o">=</span> <span class="p">(</span><span class="kt">int</span> <span class="o">*</span><span class="p">)</span><span class="n">malloc</span><span class="p">(</span><span class="k">sizeof</span><span class="p">(</span><span class="kt">int</span><span class="p">)</span><span class="o">*</span><span class="p">(</span><span class="n">n</span><span class="o">-</span><span class="n">half</span><span class="p">));</span>
</span><span class='line'>
</span><span class='line'>        <span class="n">copy_subsequence</span><span class="p">(</span><span class="n">result_array</span><span class="p">,</span> <span class="n">sub_array_a</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">half</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">half</span><span class="p">);</span>
</span><span class='line'>        <span class="n">copy_subsequence</span><span class="p">(</span><span class="n">result_array</span><span class="p">,</span> <span class="n">sub_array_b</span><span class="p">,</span> <span class="n">half</span><span class="p">,</span> <span class="n">n</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">n</span><span class="o">-</span><span class="n">half</span><span class="p">);</span>
</span><span class='line'>
</span><span class='line'>        <span class="n">merge_sort</span><span class="p">(</span><span class="n">sub_array_a</span><span class="p">,</span> <span class="n">half</span><span class="p">);</span>
</span><span class='line'>        <span class="n">merge_sort</span><span class="p">(</span><span class="n">sub_array_b</span><span class="p">,</span> <span class="n">n</span><span class="o">-</span><span class="n">half</span><span class="p">);</span>
</span><span class='line'>        <span class="n">merge_arrays</span><span class="p">(</span><span class="n">sub_array_a</span><span class="p">,</span> <span class="n">sub_array_b</span><span class="p">,</span> <span class="n">result_array</span><span class="p">,</span> <span class="n">half</span><span class="p">,</span> <span class="n">n</span><span class="o">-</span><span class="n">half</span><span class="p">);</span>
</span><span class='line'>
</span><span class='line'>        <span class="n">free</span><span class="p">(</span><span class="n">sub_array_a</span><span class="p">);</span>
</span><span class='line'>        <span class="n">free</span><span class="p">(</span><span class="n">sub_array_b</span><span class="p">);</span>
</span><span class='line'>    <span class="p">}</span>
</span><span class='line'><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>


<hr />

<p>完成后的结果：
<img src="/pictures/merge_sort.png" title="merge-sort" ></p>
</div>

</article>

	<div class="share">
	<div class="addthis_toolbox addthis_default_style ">
	
	
	<a class="addthis_button_tweet"></a>
	
	
	<a class="addthis_button_google_plusone" g:plusone:size="medium"></a>
	
	<a class="addthis_counter addthis_pill_style"></a>
	</div>
  <script type="text/javascript" src="http://s7.addthis.com/js/250/addthis_widget.js#pubid="></script>
</div>



<section id="comment">
    <h1 class="title">Comments</h1>
    <div id="disqus_thread" aria-live="polite"><noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
</div>
</section>
</div>
			</div>
			<footer id="footer" class="inner">Copyright &copy; 2013

    metooit

<br />
Powered by <a href="http://octopress.org/">Octopress</a>

</footer>
			<script src="/javascripts/slash.js"></script>
<script src="/javascripts/jquery.fancybox.pack.js"></script>
<script type="text/javascript">
(function($){
	$('.fancybox').fancybox();
})(jQuery);
</script> <!-- Delete or comment this line to disable Fancybox -->


<script type="text/javascript">
      var disqus_shortname = 'metooit';
      
        
        // var disqus_developer = 1;
        var disqus_identifier = 'http://metooit.github.com/blog/2013/02/13/learn-algorithms-sort-mergesort/';
        var disqus_url = 'http://metooit.github.com/blog/2013/02/13/learn-algorithms-sort-mergesort/';
        var disqus_script = 'embed.js';
      
    (function () {
      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
      dsq.src = 'http://' + disqus_shortname + '.disqus.com/' + disqus_script;
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    }());
</script>





		</div>
	</div>
</body>
</html>
