<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">

  <title><![CDATA[Category: Git | K.I.S.S]]></title>
  <link href="http://metooit.github.com/blog/categories/git/atom.xml" rel="self"/>
  <link href="http://metooit.github.com/"/>
  <updated>2013-04-01T22:11:04+08:00</updated>
  <id>http://metooit.github.com/</id>
  <author>
    <name><![CDATA[metooit]]></name>
    
  </author>
  <generator uri="http://octopress.org/">Octopress</generator>

  
  <entry>
    <title type="html"><![CDATA[Git 工作流程]]></title>
    <link href="http://metooit.github.com/blog/2013/03/07/git-work-flow/"/>
    <updated>2013-03-07T11:46:00+08:00</updated>
    <id>http://metooit.github.com/blog/2013/03/07/git-work-flow</id>
    <content type="html"><![CDATA[<p>Git是我最常用的版本控制工具， 当然也是我喜欢的工具之一， 我想要写一篇系统的文章来总结一下我在平时使用中总是要用到的一些<code>Git</code>的命令和技巧等， 来记录使用<code>Git</code>工作的流程。</p>

<hr />

<h2>Why Git?</h2>

<p><code>Git</code>的起源和开源运动的进行颇有渊源， 它就诞生于<code>Linux</code>兴起的那个伟大的时代， <code>Git</code>的出现正是<code>黑客精神</code>的体现， 代表了黑客们对于自由分享的向往和不懈地执着地努力！</p>

<blockquote><p>Git起源：
Linux内核最初的维护工作都是提交补丁和保存归档， 但是从2002年开始使用分布式版本管理系统<code>BitKeeper</code>来管理， 但是后者于2005年收回了Linux开源社区免费使用的权利， 于是， 为了避免重蹈复辙， Linus Torvalds 决定开发一套开源的版本控制系统， 然后Git就此诞生了， 不得不佩服这样一群黑客的伟大创举， 再次向他们致敬！</p></blockquote>

<h3>Git 的原则：</h3>

<p>说到Git的原则， 我不禁想到了<code>Unix</code>的原则， 可以说它们在某些方面是一脉相乘的：
* 简洁
* 速度
* 分布式
* 并发支持</p>

<h3>Git 很方便：</h3>

<ul>
<li>直接记录快照， 而不关心具体的数据变化</li>
<li>近乎所有的操作都在本地执行</li>
<li>时刻保持数据完整性</li>
<li>多数操作仅仅是添加数据</li>
</ul>


<p>Git 有如此多的Sexy的特性， 让人怎么能够不喜欢呢？ 正是因为有了这些特性， Git让版本控制变得不再让人头疼。</p>

<hr />

<h2>How To Install Git?</h2>

<p>在<code>Linux</code>系统上的安装很简单：只要调用系统默认的软件包管理器使用命令安装就好了
比如：
<div class='bogus-wrapper'><notextile><figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>ubuntu系统：&lt;/p>
</span><span class='line'>
</span><span class='line'>&lt;blockquote>&lt;p>sudo apt-get install git
</span><span class='line'>fedora系统：
</span><span class='line'>sudo yum install git</span></code></pre></td></tr></table></div></figure></notextile></div></p></blockquote>

<h2>And The Configuration?</h2>

<p>Git 的配置文件可以分为三个层级：
* /etc/gitconfig 中所配置的是系统中所有用户的通用配置。
如果使用：
<div class='bogus-wrapper'><notextile><figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>&lt;/p>
</span><span class='line'>
</span><span class='line'>&lt;blockquote>&lt;p>git config --system</span></code></pre></td></tr></table></div></figure></notextile></div>
修改的就是这个文件了</p></blockquote>

<ul>
<li><p>~/gitconfig 中所做的配置只是针对当前的用户
如果使用：
<div class='bogus-wrapper'><notextile><figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>&lt;/p>
</span><span class='line'>
</span><span class='line'>&lt;blockquote>&lt;p>git config --global</span></code></pre></td></tr></table></div></figure></notextile></div>
修改的就是这个文件了</p></blockquote></li>
<li><p>最后一级就是当前项目中<code>.git</code>文件夹下的<code>config</code>配置文件了， 这个配置仅对当前项目有效。</p></li>
</ul>


<p>所以， 安装<code>Git</code>完成后， 就需要对<code>Git</code>进行配置了：</p>

<h3>用户信息：</h3>

<p><div class='bogus-wrapper'><notextile><figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>$ git config --global user.name "xxxx"
</span><span class='line'>$ git config --global user.email "xxxx@xxxx.xxx"</span></code></pre></td></tr></table></div></figure></notextile></div></p>

<h3>文本编辑器：</h3>

<p><div class='bogus-wrapper'><notextile><figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>$ git config --global core.editor vi</span></code></pre></td></tr></table></div></figure></notextile></div>
当然是选择我最喜欢的<code>Vim</code>啦！～</p>

<h3>差异分析工具：</h3>

<p><div class='bogus-wrapper'><notextile><figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>$ git config --global merge.tool vimdiff</span></code></pre></td></tr></table></div></figure></notextile></div></p>

<h3>查看当前的配置信息：</h3>

<p><div class='bogus-wrapper'><notextile><figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>$ git config --list</span></code></pre></td></tr></table></div></figure></notextile></div></p>

<hr />

<!-- more -->


<h2>To Start Work With Git</h2>

<hr />

<h3>新建Project并开始使用Git管理：</h3>

<p><div class='bogus-wrapper'><notextile><figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>1. 创建工作目录:
</span><span class='line'>$ mkdir &lt;code>工作目录名称&lt;/code>&lt;/p>
</span><span class='line'>
</span><span class='line'>&lt;ol>
</span><span class='line'>&lt;li>&lt;p>切换到工作目录：
</span><span class='line'>$ cd &lt;code>工作目录名称&lt;/code>&lt;/p>&lt;/li>
</span><span class='line'>&lt;li>&lt;p>初始化工作目录：（Git初始化）
</span><span class='line'>$ git init</span></code></pre></td></tr></table></div></figure></notextile></div></p></li>
</ol>


<p>这几步就可以新建一个工程， 并初始化使用<code>Git</code>管理了。执行完<code>git init</code>后工作目录下多了一个<code>.git</code>文件夹， 其中包含了各种设置信息等。<code>git init</code> 文件同时也执行了 <code>git add .</code> 这样的话， 如果你的目录中之前有文件的话， 那么执行这样的一条命令之后， 当前目录的文件会自动加入工程之中。</p>

<h3>添加文件纳入Git版本控制：</h3>

<p><div class='bogus-wrapper'><notextile><figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>1. 创建文件： （多种方式）
</span><span class='line'>$ touch &lt;code>文件名称&lt;/code>&lt;/p>
</span><span class='line'>
</span><span class='line'>&lt;ol>
</span><span class='line'>&lt;li>&lt;p>添加文件： （多种方式）
</span><span class='line'>$ git add &lt;code>文件名称&lt;/code>&lt;/p>&lt;/li>
</span><span class='line'>&lt;li>&lt;p>Commit:
</span><span class='line'>$ git commit -m &lt;code>INFORMARION&lt;/code></span></code></pre></td></tr></table></div></figure></notextile></div></p></li>
</ol>


<p>通常， 添加文件时我会使用<code>git add .</code>, 当然这也分情况而定。</p>

<blockquote><p>注：这里通常要新建一个<code>README.md</code>文件， 以让其他人了解你的项目， 同时也记录一些自己的项目进展和bug status等等.</p>

<pre><code>  另外， 可能需要一个`.gitignore`来忽略某些文件.
</code></pre></blockquote>

<h3>克隆现有项目：</h3>

<p><div class='bogus-wrapper'><notextile><figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>$ git clone #url# [自定义名称]</span></code></pre></td></tr></table></div></figure></notextile></div></p>

<hr />

<h2>Convenience With Git</h2>

<h3>查看当前文件状态：</h3>

<p><div class='bogus-wrapper'><notextile><figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>$ git status</span></code></pre></td></tr></table></div></figure></notextile></div>
这条命令太常用了， 你可以时刻通过这样一条简单的命令掌控每一个文件的状态， 真心方便已极。</p>

<h3>暂存更新：</h3>

<p><div class='bogus-wrapper'><notextile><figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>$ git add [修改后的文件]</span></code></pre></td></tr></table></div></figure></notextile></div></p>

<h3>查看具体的修改状况：</h3>

<p><div class='bogus-wrapper'><notextile><figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>1. 查看未暂存的文件更新了那些部分：
</span><span class='line'>$ git diff&lt;/p>
</span><span class='line'>
</span><span class='line'>&lt;ol>
</span><span class='line'>&lt;li>查看已暂存文件和上次提交的快照的差异：
</span><span class='line'>$ git diff --cached [--staged]</span></code></pre></td></tr></table></div></figure></notextile></div></li>
</ol>


<hr />

<h2>The Exciting Time</h2>

<h3>提交更改：</h3>

<p><div class='bogus-wrapper'><notextile><figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>1. 提交准备：
</span><span class='line'>$ git status&lt;/p>
</span><span class='line'>
</span><span class='line'>&lt;ol>
</span><span class='line'>&lt;li>提交更改：
</span><span class='line'>$ git commit</span></code></pre></td></tr></table></div></figure></notextile></div></li>
</ol>


<p>注意： 每次提交之前要运行一下<code>git status</code>, 看看是否已经暂存， 这是一个好习惯。</p>

<p>另外， 提交时也可以包含一些信息：
<div class='bogus-wrapper'><notextile><figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>$ git commit -m "提交信息（如Bug修正等）"</span></code></pre></td></tr></table></div></figure></notextile></div></p>

<p>提交的记录只是放在暂存区的快照， 每次提交之后， 你还可以通过快照回溯到以前的状态。 多牛啊！</p>

<h3>更快捷的提交：</h3>

<p>Git 提供了一个命令选项用来简化提交操作， 这个命令选项简化了<code>git add</code>这一步：
<div class='bogus-wrapper'><notextile><figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>$ git commit -a</span></code></pre></td></tr></table></div></figure></notextile></div>
对了！ 就是这个<code>-a</code>选项， 同时你也可以使用<code>-m</code>添加消息：
<div class='bogus-wrapper'><notextile><figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>$ git commit -am "提交信息"</span></code></pre></td></tr></table></div></figure></notextile></div></p>

<h3>移除文件：</h3>

<p>要移除某个文件， 必须从已经暂存的文件中将文件去除：
<div class='bogus-wrapper'><notextile><figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>$ git rm [移除的文件名称]</span></code></pre></td></tr></table></div></figure></notextile></div></p>

<p>如果删除之前修改过， 并且已经放到暂存区域的话， 那么要使用强制删除选项： <code>-f</code></p>

<p>如果要将文件从Git仓库删除（暂存区域删除）， 但是仍保留在当前目录中， 即： 去除跟踪但是不删除文件， 一边在<code>.gitignore</code>中补上： <code>--cached</code></p>

<h3>移动文件：</h3>

<p>Git 并不跟踪文件的移动操作， 但是它可以判断出发生了什么：
<div class='bogus-wrapper'><notextile><figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>$ git mv [源文件名] [目标文件名]</span></code></pre></td></tr></table></div></figure></notextile></div></p>

<p>实际上， 运行<code>git mv</code>相当与运行三个命令：
<div class='bogus-wrapper'><notextile><figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>$ mv [源文件名] [目标文件名]
</span><span class='line'>$ git rm [源文件名]
</span><span class='line'>$ git add [目标文件名]</span></code></pre></td></tr></table></div></figure></notextile></div></p>

<h3>查看提交历史：</h3>

<p><div class='bogus-wrapper'><notextile><figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>$ git log</span></code></pre></td></tr></table></div></figure></notextile></div>
不带参数时， 会按时间列出所有的更新。</p>

<blockquote><p><code>-p</code> 选项展开显示每次提交的差异
<code>-数字</code> 选项选择最近的N次更新
<code>--stat</code> 选项仅显示简要的增改行数统计
<code>--pretty</code>
<code>--oneline</code> 或 <code>--pretty</code> 结合 <code>--graph</code>使用， 会显示ASCII 字符画</p></blockquote>
]]></content>
  </entry>
  
</feed>
